{% extends 'base.html' %}
{% load widget_tweaks %}
{% load staticfiles %}
{% block content %}
<<<<<<< HEAD
 <h3 class="top-heading">My Daily Reports</h3>
 <table border="5" class="table dataTable ">
 <thead >
 	 <form method="post">
       {% csrf_token %}
   Start date :<input type="date" name="start_date" class="form-control"
                                      placeholder=date / required="">
   Start date :<input type="date" name="end_date" class="form-control"
                                      placeholder=date / required="">
  <input type="submit"class="btn btn-primary btn-lg"   value="search">
</form>

<h5>{{error}}</h5>
 <th>Date</th>	
 <th>Project Name</th>
 <th>Project Billiable Summary</th>
 <th>Project Billiable Time</th>
 <th>Project Non-billiable Summary</th>
 <th>Project Non-billiable Time</th>
 <th>Action</th>
 </thead>
 {% for reports in report %}
 <tr>
 <td>{{reports.date}}</td>
 <td>{{reports.project_name.project.project_name}}</td>
 <td>{{reports.billable_summary}}</td>
 <td>{{reports.billable_hour}}</td>
 <td>{{reports.non_billable_summary}}</td>
 <td>{{reports.non_billable_hour}}</td>
 
 <td> <a href="/edit_daily_update/{{reports.id}}" class="sameicon pencilicon"><span class="glyphicon glyphicon-pencil" title="Edit Report"></span></a> <a href="/delete_daily_update/{{reports.id}}" class="delete"><span class="glyphicon glyphicon-trash" title="Delete"></span></a> </td>
 
{% endfor %}
 {% endblock %}
=======
>>>>>>> bc1a5adb3c61eb7a845dcc03f2e871985b833801

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.1/css/bootstrap-select.css" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.1/js/bootstrap-select.js"></script>



<h1>my daily reports</h1>

<label>Select Project</label>
<select id ='projectselection' class="selectpicker" data-show-subtext="true" data-live-search="true">
   <option value="{{project_name}}">Select project</option>
   {% for name in project_name %}
   <option id="{{ name }}" value="{{ name }}">
      {{ name }}
   </option>
   {% endfor %}
</select>
<button onclick="search_project()" class="btn btn-primary btn-lg">Search Project</button>

<!-- 
<button onclick="search_all()" class="btn btn-primary btn-lg">search all</button> -->
<br>
<table border="5">
<thead >
   Start date :<input type="date" name="start_date" id='start' class="form-control"
      placeholder=date / required="" value='{{start_date}}' required="" >
   End date :<input type="date" name="end_date"  id ='end'class="form-control"
      placeholder=date / required="" value="{{end_date}}" required="">
   <button type="submit" onclick='search_date()'class="btn btn-primary btn-lg">Search</button>
   <button onclick="refresh()" class="btn btn-primary btn-lg">Refresh</button>
   <table id ='selectemp' border="5" class="table datatable">
   




      <thead>
         <th>Date</th>
         <th>Project Name</th>
         <th>Project Billiable Summary</th>
         <th>Project Billiable Time</th>
         <th>Project Non-billiable Summary</th>
         <th>Project Non-billiable Time</th>
         <th>Action</th>
      </thead>
      {% for reports in report %}
      <tr>
         <td>{{reports.date}}</td>
         <td>{{reports.project_name.project.project_name}}</td>
         <td>{{reports.billable_summary}}</td>
         <td>{{reports.billable_hour}}</td>
         <td>{{reports.non_billable_summary}}</td>
         <td>{{reports.non_billable_hour}}</td>
         <td> <a href="/edit_daily_update/{{reports.id}}" class="sameicon pencilicon"><span class="glyphicon glyphicon-pencil" title="Edit Report"></span></a> <a href="/delete_daily_update/{{reports.id}}" class="delete"><span class="glyphicon glyphicon-trash" title="Delete"></span></a> </td>
      </tr>
      {% endfor %}
   </table>
   {% endblock %}
   {% block extra_js %}
   <script type="text/javascript">
      function search_date(){
         start_date = $('#start').val();
         end_date = $('#end').val();
         $.ajax({
      
             url: "{% url 'employee:filter_by_date' %}",
             type: 'GET',
             data : {"start_date":start_date,"end_date":end_date},
             success: function(res) 
           {debugger;
            $('#selectemp').html(res);    
          },
             error: function (jqXHR, exception) {
              debugger;
             alert(exception);
             }
         });
      };
      function refresh(){
      location.reload();
      };
   </script>
   <script type="text/javascript">
      function search_project(){
      pname = $('#projectselection').val(); 
    
   $.ajax({
          url: "{% url 'employee:filter_by_date' %}",
          type: 'GET',
          data : {"pname":pname},
          success: function(res) 
          { 
            $('#selectemp').html(res);    
          },
          error: function (jqXHR, exception) {
            debugger;
          }
      });
   }; 
  function search_all(){
    start_date = $('#start').val()
    end_date = $('#end').val()
    pname = $('#projectselection').val(); 
    data = {'pname':pname ,'start_date':start_date,'end_date':end_date};

     $.ajax({
          url: "{% url 'employee:filter_by_date_and_project' %}",
          type: 'GET',
          data : data,
          success: function(res) 
          { debugger
            $('#selectemp').html(res);    
          },
          error: function (jqXHR, exception) {
            debugger;
            alert(exception);
          }
      });
   };

</script>
   {% endblock extra_js %}